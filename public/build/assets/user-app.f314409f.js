/* empty css              *//* empty css                   */import"./datatables.default.6403d28a.js";import{m as c}from"./toast.04e64154.js";$("#user-table").DataTable({dom:"Bftip",ajax:"/registros",columns:[{data:"id"},{data:"tipo",searchable:!1},{data:"titulo"},{data:"descripcion"},{data:"aprobacion",render:function(e,a,t,l){return`<strong class="${t.aprobacion=="Aprobado"?"text-success":"text-danger"}">${t.aprobacion}</strong>`},searchable:!1},{data:"actions",searchable:!1,orderable:!1}],buttons:[{text:`
            <a href='/registro/new' class='theme_button min_width_button color4'>
            <span class="left-icon">
                <i class="apsc-post fa fa-plus"></i>
            </span>
                <span class="media-name pl-2">Crear</span>
            </a>`,title:"Crea Nuevo Usuario",action:function(e,a,t,l){window.location.href="/registro/new"}}]});const p=()=>{document.querySelectorAll("img").forEach(e=>{e.onerror=f})};let f=function(e){console.log(this),this.alt?console.log(this.alt):console.log("La Imagen no pudo ser Cargada ..."),console.log("Se cargara la imagen por Defecto"),this.src="images/default-user.png"},r=document.getElementById("avatar"),n=document.getElementById("update");p();document.getElementById("user-camera").addEventListener("click",e=>{r.click()});var s;let d=document.getElementById("crop_image"),i=$("#modal_image");r.addEventListener("change",e=>{e.target.files.length>0&&(d.src=URL.createObjectURL(e.target.files[0]),i.modal("show"))});i.on("shown.bs.modal",function(){s=new Cropper(d,{aspectRatio:1,viewMode:2,dragMode:"move",preview:".preview",background:!1})}).on("hidden.bs.modal",function(){s.destroy(),s=null});document.getElementById("crop").addEventListener("click",function(){if(s){let e=s.getCroppedCanvas();e.toBlob(a=>{let t=`/profile/avatar/${r.dataset.user}`,l={avatar:a};axios.post(t,l,{headers:{"Content-Type":"multipart/form-data"}}).then(o=>{o.status==200&&(c({mensaje:o.data,clase:"success"}),$(".avatar").attr("src",e.toDataURL()))}).catch(o=>{c({mensaje:o.response.data,clase:"error"}),console.log(o)})})}i.modal("hide")});n.addEventListener("click",e=>{e.preventDefault();let a=n.querySelector("i");a.classList.contains("fa-edit")?u():a.classList.contains("fa-save")&&document.querySelector("#update-user").submit(),m()});document.querySelector(".cancelar").addEventListener("click",m);function m(){let e=n.querySelector("i"),a=n.querySelector("span.media-name"),t=a.dataset.option;e.classList.contains("fa-save")&&u(),document.querySelector(".cancelar").classList.toggle("invisible"),a.dataset.option=a.innerText,a.innerText=t,e.classList.toggle("fa-edit"),e.classList.toggle("fa-save")}function u(){let e=document.querySelector("form#update-user").elements;for(let a=0;a<e.length;a++)e[a].type!="hidden"&&(e[a].disabled=!e[a].disabled)}
